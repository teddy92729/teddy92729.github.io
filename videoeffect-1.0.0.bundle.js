(()=>{"use strict";var e={m:{},u:e=>e+".videoeffect-1.0.0.bundle.js"};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var s=r.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.b=document.baseURI||self.location.href;let t=new Worker(new URL(e.p+e.u(504),e.b),{type:void 0}),r=document.getElementsByTagName("video")[0];new class{constructor(e){this.__canvas=document.createElement("canvas"),this.__offscreen=this.__canvas.transferControlToOffscreen(),this.__video=e,this.__video.addEventListener("canplay",(()=>{let e=this.__video.captureStream(),r=()=>{let r=e.getVideoTracks();if(0==r.length)return;let s=r[r.length-1],n=new MediaStreamTrackProcessor({track:s}).readable;t.postMessage({readable:n},[n])};e.addEventListener("addtrack",(()=>{r()})),r()}));let r=()=>{let t=this.canvas,r=window.getComputedStyle(e,null),{x:s,y:n}=function(e){let t=0,r=0;for(;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:r}}(e);t.style.position="fixed",t.style.display="block",t.style.left=s-window.scrollX+"px",t.style.top=n-window.scrollY+"px",t.style.width=`${parseInt(r.width.replace("px",""))+1}px`,t.style.height=r.height};r(),new ResizeObserver(r).observe(e),window.addEventListener("scroll",r),e.parentNode.insertBefore(this.canvas,e.nextSibling),t.postMessage({destCanvasElement:this.__offscreen},[this.__offscreen])}get canvas(){return this.__canvas}}(r)})();